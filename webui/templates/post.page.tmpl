{{template "base" .}}

{{define "title"}}Post{{.Post.ID}}{{end}}

{{define "main"}}
    {{$loggedin := .Session.IsLoggedin}}
    <div class="post">
        {{with .Post}}
            <p id ={{.ID}} class="post-id">#{{.ID}} by {{template "linkuser" .}} {{range .Categories}} <span id={{.ID}}>, #{{.Name}}</span>{{end}}</p>
            <div id="{{.ID}}-content" class="post-content">
                <p><b>{{.Theme}}</b></p>
                {{.Message.Content}}
            </div>
        {{end}}
        <div id="reactions">
            {{if $loggedin}}
                {{with .Post}}
                    <span id="{{.ID}}-posts_likes-true-n">{{index .Message.Likes 0}}</span><button id="{{.ID}}-posts_likes-true" messageID="{{.ID}}" messageType="posts_likes" like="true" class="likeicon" name="post-true" onclick="handleLike(this.id)"><img class="likeicon" src="https://cdn-icons-png.flaticon.com/512/3128/3128316.png"></img></button>
                    <span id="{{.ID}}-posts_likes-false-n">{{index .Message.Likes 1}}</span><button id="{{.ID}}-posts_likes-false" messageID="{{.ID}}" messageType="posts_likes" like="false" class="likeicon" name="post-false" onclick="handleLike(this.id)"><img class="likeicon" src="https://cdn-icons-png.flaticon.com/512/3128/3128319.png"></button>
                {{end}}
            {{else}} 
                {{with .Post}}
                    <span id="{{.ID}}-posts_likes-true-n">{{index .Message.Likes 0}}</span><button id="{{.ID}}-posts_likes-true" class="likeicon not-active-link" name="post-true"><img class="likeicon not-active-link" src="https://cdn-icons-png.flaticon.com/512/3128/3128316.png"></img></button>
                    <span id="{{.ID}}-posts_likes-false-n">{{index .Message.Likes 1}}</span><button id="{{.ID}}-posts_likes-false" class="likeicon not-active-link" name="post-false"><img class="likeicon not-active-link" src="https://cdn-icons-png.flaticon.com/512/3128/3128319.png"></img></button>
                {{end}}
            {{end}}
        </div>
    </div>

    {{range .Post.Comments}}
        <div id="comments-{{.ID}}" class="post">
            <p class="post-id">#{{.ID}} by {{template "linkuser" .}} </p>
            <div id="{{.ID}}-comment-content" class="post-content">
                {{.Message.Content}}
            </div>
            <div id="reactions">
                {{if $loggedin}}
                    <span id="{{.ID}}-comments_likes-true-n">{{index .Message.Likes 0}}</span><button id="{{.ID}}-comments_likes-true" messageID="{{.ID}}" messageType="comments_likes" like="true" class="likeicon" name="comment-true"  onclick="handleLike(this.id)"><img class="likeicon" src="https://cdn-icons-png.flaticon.com/512/3128/3128316.png"></img></button>
                    <span id="{{.ID}}-comments_likes-false-n">{{index .Message.Likes 1}}</span><button id="{{.ID}}-comments_likes-false" messageID="{{.ID}}" messageType="comments_likes" like="false" class="likeicon" name="comment-false"  onclick="handleLike(this.id)"><img class="likeicon" src="https://cdn-icons-png.flaticon.com/512/3128/3128319.png"></button>
                {{else}} 
                    <span id="{{.ID}}-comments_likes-true-n">{{index .Message.Likes 0}}</span><button id="{{.ID}}-comments_likes-true" class="likeicon not-active-link" name="comment-true"><img class="likeicon not-active-link" src="https://cdn-icons-png.flaticon.com/512/3128/3128316.png"></img></button>
                    <span id="{{.ID}}-comments_likes-false-n">{{index .Message.Likes 1}}</span><button id="{{.ID}}-comments_likes-false" class="likeicon not-active-link" name="comment-false"><img class="likeicon not-active-link" src="https://cdn-icons-png.flaticon.com/512/3128/3128319.png"></img></button>
                {{end}}
            </div>
        </div>
    {{end}}
    {{if .Session.IsLoggedin}}
        <form id="writecomment" class="post" method="post">
            <input id="invisible" name="authorID" value="{{.Session.User.ID}}"></input>
            <textarea id="newcomment" name="content" placeholder="Write your comment..."></textarea>
            <button id="submitcomment" class="signinupformbutton">Submit</button>
        </form>
    {{end}}
{{end}}  